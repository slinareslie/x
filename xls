# Obtener la fecha actual
$currentDate = Get-Date

# Determinar la fecha base según si es lunes o no
if ($currentDate.DayOfWeek -eq 'Monday') {
    $adjustedDate = $currentDate.AddDays(-3)
}
else {
    $adjustedDate = $currentDate.AddDays(-1)
}

# Extraer componentes de la fecha ajustada
$year = $adjustedDate.Year
$month = $adjustedDate.Month
$day = $adjustedDate.Day

# Verificar si el día está en el rango 1-3 y ajustar al mes anterior si es necesario
if ($day -le 3) {
    if ($month -eq 1) {
        $month = 12
        $year -= 1
    }
    else {
        $month -= 1
    }

    $lastDayOfPreviousMonth = [datetime]::DaysInMonth($year, $month)
    $day = $lastDayOfPreviousMonth - (3 - $day)
}

# Mostrar resultado (opcional)
"Fecha ajustada: $year-$month-$day"
